{"version":3,"sources":["ts/dto/pagination.ts","ts/search-orders.ts"],"names":[],"mappings":"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","file":"search-orders.7a2cee13.js","sourceRoot":"..","sourcesContent":["export class Pagination{\n\n    pageCount: number = 1;\n\n    constructor(private elm: JQuery, public pageSize: number = 6, public totalRecords: number,private callFn: Function, public selectedPage: number = 1){\n        this.reInitialize(totalRecords, selectedPage, pageSize);\n    }\n\n    reInitialize(totalRecords: number, selectedPage: number = 1, pageSize: number = 6): void{\n\n        this.pageCount = Math.ceil(totalRecords / pageSize);\n\n        this.showOrHidePagination();\n        if (this.pageCount <= 1) return;\n    \n        let html = `<li class=\"page-item\"><a class=\"page-link\" href=\"#!\">«</a></li>`;\n    \n        for (let i = 0; i < this.pageCount; i++) {\n            html += `<li class=\"page-item ${selectedPage === (i + 1) ? 'active' : ''}\"><a class=\"page-link\" href=\"javascript:void(0);\">${i + 1}</a></li>`;\n        }\n    \n        html += `<li class=\"page-item\"><a class=\"page-link\" href=\"javascript:void(0);\">»</a></li>`;\n    \n        this.elm.html(html);\n    \n        if (selectedPage === 1) {\n            this.elm.find(\".page-item:first-child\").addClass('disabled');\n        } else if (selectedPage === this.pageCount) {\n            this.elm.find(\".page-item:last-child\").addClass('disabled');\n        }\n    \n        this.elm.find(\".page-item:first-child\").on('click', () => this.navigateToPage(selectedPage - 1));\n        this.elm.find(\".page-item:last-child\").on('click', () => this.navigateToPage(selectedPage + 1));\n    \n        const self = this;\n        this.elm.find(\".page-item:not(.page-item:first-child, .page-item:last-child)\").on('click', function () {\n            self.navigateToPage(+$(this).text());\n        });\n    }\n\n    private showOrHidePagination(): void {\n        this.pageCount > 1 ? this.elm.show() : this.elm.hide();\n    }\n\n    navigateToPage(page: number): void {\n\n        if (page < 1 || page > this.pageCount) return;\n\n        this.selectedPage = page;\n        this.callFn();\n    }\n\n}\n\n","import { Order } from \"./dto/search-order\";\nimport { Pagination } from \"./dto/pagination\";\n\nconst BASE_API = 'http://localhost:8080/pos';\nconst ORDERS_SERVICE_API = `${BASE_API}/orders`;\nconst PAGE_SIZE = 6;\nconst PAGINATION = new Pagination($('.pagination'),PAGE_SIZE,0,searchOrders);\n\nsearchOrders();\n\n$('#btn-search').on('click',(eventData)=>{\n    eventData.preventDefault();\n    searchOrders();\n});\n\n$(\"#txt-search\").on('input',()=>{\n    searchOrders();\n});\n\nfunction searchOrders():void{\n    \n    fetch(ORDERS_SERVICE_API + `?${new URLSearchParams({page:PAGINATION.selectedPage + '', size: PAGE_SIZE + '', q: $('#txt-search').val() + ''})}`)\n    .then((resp)=>{\n        const count = +resp.headers.get('X-Total-Count');\n        if(resp.status !== 200) throw new Error(\"Something went wrong, please try again\");\n        PAGINATION.reInitialize(count,PAGINATION.selectedPage,PAGE_SIZE);\n        \n        return resp.json();\n    }).then((data)=>{\n        $('#tbl-orders tbody tr').remove();\n        \n        const orders: Array<Order> = data;\n        orders.forEach((o)=>{\n            const rowHtml = `<tr>\n            <td>${o.orderId}</td>\n            <td>${o.orderDate}</td>\n            <td>${o.customerId}</td>\n            <td>${o.customerName}</td>\n            <td>${o.orderTotal.toFixed(2)}</td>\n            </tr>\n            `;\n            $('#tbl-orders tbody').append(rowHtml);\n        });        \n    }).catch((err)=>{\n        alert(err.message);\n        console.error(err);\n        \n    });\n}\n"]}